<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Deploy An Explainer — deploy_explainer • xai2cloud</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- dalexverse -->
<link href="../dalexverse.css" rel="stylesheet">
<link href="../dalexverse-2.css" rel="stylesheet">

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>






<meta property="og:title" content="Deploy An Explainer — deploy_explainer" />
<meta property="og:description" content="This function deploys an explainer as an REST API with an corresponding swagger.
A new folder will be created in your working directory containing a plumber R file and an .rda file of the explainer.
Deployment can be done either locally or directly to the DigitalOcean's droplet.
Full guide on setting up DigitalOcean's droplet and deploying to the cloud can be found on package's GitHub page." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-5650686-14""></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-5650686-14');
</script>

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">xai2cloud</a>
        <div class="info">
          <span class="partof">part of the <a href="https://github.com/ModelOriented/DrWhy">DrWhy.AI</a>
           developed by the <a href="https://mi2.mini.pw.edu.pl/">MI^2 DataLab</a> </span>
          <span class="version version-default">0.1.0</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/vignette_tutorial.html">Deployment Tutorial</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/Adamoso/xai2cloud/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Deploy An Explainer</h1>
    <small class="dont-index">Source: <a href='https://github.com/Adamoso/xai2cloud/blob/master/R/deploy_explainer.R'><code>R/deploy_explainer.R</code></a></small>
    <div class="hidden name"><code>deploy_explainer.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function deploys an explainer as an REST API with an corresponding swagger.
A new folder will be created in your working directory containing a plumber R file and an .rda file of the explainer.
Deployment can be done either locally or directly to the DigitalOcean's droplet.
Full guide on setting up DigitalOcean's droplet and deploying to the cloud can be found on package's GitHub page.</p>
    </div>

    <pre class="usage"><span class='fu'>deploy_explainer</span>(
  <span class='no'>exp_name</span>,
  <span class='no'>model_package</span>,
  <span class='kw'>droplet</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>port</span> <span class='kw'>=</span> <span class='fl'>8088</span>,
  <span class='kw'>deploy</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>title</span> <span class='kw'>=</span> <span class='st'>"xai2cloud"</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>exp_name</th>
      <td><p>DALEX explainer object or an .rda filename in your working directory containing the explainer</p></td>
    </tr>
    <tr>
      <th>model_package</th>
      <td><p>Name of package used to build the model, eg: "randomForest", "gbm".</p></td>
    </tr>
    <tr>
      <th>droplet</th>
      <td><p>If you want to deploy the API locally leave the value as <code>NA</code>. If you want to deploy to DigitalOcean, use the droplet's ID which can be checked by using <code><a href='https://rdrr.io/pkg/analogsea/man/droplets.html'>analogsea::droplets()</a></code></p></td>
    </tr>
    <tr>
      <th>port</th>
      <td><p>Port on which you want your API to be deployed</p></td>
    </tr>
    <tr>
      <th>deploy</th>
      <td><p>Boolean telling whether the plumber file is run on set port</p></td>
    </tr>
    <tr>
      <th>title</th>
      <td><p>Title to be seen in Swagger</p></td>
    </tr>
    </table>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Using an explainer object, locally</span>
<span class='co'># Load data and create model</span>
<span class='no'>model_data</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>DALEX</span><span class='kw ns'>::</span><span class='no'><a href='https://rdrr.io/pkg/DALEX/man/titanic.html'>titanic_imputed</a></span>
<span class='no'>titanic_glm</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/glm.html'>glm</a></span>(<span class='no'>survived</span> ~ <span class='no'>gender</span> + <span class='no'>age</span> + <span class='no'>fare</span>,
                       <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>model_data</span>, <span class='kw'>family</span> <span class='kw'>=</span> <span class='st'>"binomial"</span>)
<span class='co'># Create DALEX explainer</span>
<span class='no'>explain_titanic_glm</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>DALEX</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/DALEX/man/explain.html'>explain</a></span>(<span class='no'>titanic_glm</span>,
                           <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>model_data</span>,
                           <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>model_data</span>$<span class='no'>survived</span>,
                           <span class='kw'>label</span> <span class='kw'>=</span> <span class='st'>"glm"</span>)</div><div class='output co'>#&gt; Preparation of a new explainer is initiated
#&gt;   -&gt; model label       :  glm 
#&gt;   -&gt; data              :  2207  rows  8  cols 
#&gt;   -&gt; target variable   :  2207  values 
#&gt;   -&gt; model_info        :  package stats , ver. 4.0.0 , task classification ( <span style='color: #BBBB00;'> default </span><span> ) 
#&gt;   -&gt; predict function  :  yhat.glm  will be used ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; predicted values  :  numerical, min =  0.1490412 , mean =  0.3221568 , max =  0.9878987  
#&gt;   -&gt; residual function :  difference between y and yhat ( </span><span style='color: #BBBB00;'> default </span><span> )
#&gt;   -&gt; residuals         :  numerical, min =  -0.8898433 , mean =  4.198546e-13 , max =  0.8448637  
#&gt;  </span><span style='color: #00BB00;'> A new explainer has been created! </span><span> </div><div class='input'><span class='co'># Deploy the API</span>
<span class='co'># If you want the API to deploy automatically, set deploy parameter to TRUE</span>

<span class='co'># Locally</span>
<span class='fu'>deploy_explainer</span>(<span class='no'>explain_titanic_glm</span>, <span class='kw'>model_package</span> <span class='kw'>=</span> <span class='st'>"stats"</span>,
  <span class='kw'>title</span> <span class='kw'>=</span> <span class='st'>"Titanic"</span>, <span class='kw'>port</span> <span class='kw'>=</span> <span class='fl'>8070</span>, <span class='kw'>deploy</span><span class='kw'>=</span><span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; <span class='message'>Welcome to DALEX (version: 1.2.1).</span>
#&gt; <span class='message'>Find examples and detailed introduction at: https://pbiecek.github.io/ema/</span>
#&gt; <span class='message'>Additional features will be available after installation of: ggpubr.</span>
#&gt; <span class='message'>Use 'install_dependencies()' to get all suggested dependencies</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘ingredients’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:iBreakDown’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    describe, plotD3</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from ‘package:DALEX’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    feature_importance</span></div><div class='input'>
<span class='co'># To the cloud</span>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='kw pkg'>analogsea</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/analogsea/man/droplets.html'>droplets</a></span>()
<span class='fu'>deploy_explainer</span>(<span class='no'>explain_titanic_glm</span>, <span class='kw'>model_package</span> <span class='kw'>=</span> <span class='st'>"stats"</span>,
  <span class='kw'>title</span> <span class='kw'>=</span> <span class='st'>"Titanic"</span>, <span class='kw'>droplet</span> <span class='kw'>=</span> <span class='fl'>136232162</span>,
  <span class='kw'>port</span> <span class='kw'>=</span> <span class='fl'>8080</span>)
}</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Adam Rydelek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


